<div class="card comments mt-5 mb-5">
  <div class="card-header border-bottom-0 font-weight-bold bg-transparent">Comentarios</div>
  <ul class="list-group list-group-flush">
    <% @item.comments.each do |comment| %>
      <li class="list-group-item">
        <header class="comment-header"><strong><%= comment.user.username %></strong> wrote <%= distance_of_time_in_words(Time.current, comment.created_at) %> ago</header>
        <div class="comment-body"><%= comment.body %></div>
        <% if !current_user.nil? && (comment.user.username == current_user.username) %>
        <%= link_to "Remove", @comment, method: :delete, data: { confirm: "Are you sure you want to delete this comment?" } %>  <br>

        <% end %>
      </li>
    <% end %>

    <% if @item.comments.empty? %>
      <li class="list-group-item text-center">No one has made a comment yet, be the first one.</li>
    <% end %>
  </ul>
</div>

<% if logged_in? %>
  <div class="card bg-light new-comment">
    <div class="card-body">
      <p class="font-weight-bold">Deja tu comentario:</p>
      <%= form_for @item.comments.build do |f| %>
        <%= f.hidden_field :item_id, value: @item.id %>
        <div class="form-group">
          <%= f.text_area :body, rows: 4, class: "form-control" %>
        </div>

        <div class="text-right">
          <%= f.submit "Comentar", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  <div class="card bg-light mt-5">
    <div class="card-body">
      <p class="card-text text-center lead"><%= link_to "RegÃ­strate", sign_up_path %> o <%= link_to "Ingresa", log_in_path %> para comentar</p>
    </div>
  </div>
<% end %>